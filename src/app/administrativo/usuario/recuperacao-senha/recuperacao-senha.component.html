<div *ngIf="form" class="login-form">
  <app-panel-loader [visible]="loading"></app-panel-loader>

  <img class="logo" src="assets/image/logo.png" alt="Angular App" title="Angular App">

  <ng-container *ngIf="!isModoAtualizacaoSenha(); else atualizacaoSenha">
    <form class="form form-recuperacao-senha" [formGroup]="form" autocomplete="off" [class.submitted]="formSubmitted" (ngSubmit)="recuperarSenha()">
      <div class="ui-g">
        <div class="ui-g-12">
          <h1 class="text-center">Recuperação de Senha</h1>
        </div>
      </div>

      <div class="ui-g form-group-email">
        <label for="email" class="ui-g-12 control-label">E-mail</label>
        <div class="ui-g-12">
          <input pInputText type="text" id="email" class="form-control" formControlName="email" appAutoFocus>
          <app-validation [control]="form.get('email')" [submitted]="formSubmitted" mode="submitted"></app-validation>
        </div>
      </div>

      <div class="ui-g form-group-botoes">
        <div class="ui-g-12">
          <button pButton type="submit" class="pull-right" icon="fa fa-envelope-o" label="Enviar"></button>
          <a pButton routerLink="/login" class="pull-left ui-button-secondary" icon="fa fa-undo" label="Voltar"></a>
        </div>
      </div>
    </form>
  </ng-container>

  <ng-template #atualizacaoSenha>
    <form class="form form-atualizacao-senha" [formGroup]="form" autocomplete="off" [class.submitted]="formSubmitted" (ngSubmit)="atualizarSenha()">
      <div class="ui-g ui-fluid">
        <div class="ui-g-12">
          <h1 class="text-center">Atualização de Senha</h1>
        </div>
      </div>

      <div class="ui-g form-group-senha">
        <label for="senha" class="ui-g-12 control-label">Senha</label>
        <div class="ui-g-12">
          <input pInputText type="password" id="senha" class="form-control" formControlName="senha" appAutoFocus>
          <app-validation [control]="form.get('senha')" [submitted]="formSubmitted" mode="submitted"></app-validation>
        </div>
      </div>

      <div class="ui-g form-group-confirmacao-senha">
        <label for="confirmacao-senha" class="ui-g-12 control-label">Confirmação de Senha</label>
        <div class="ui-g-12">
          <input pInputText type="password" id="confirmacao-senha" class="form-control" formControlName="confirmacaoSenha" />
          <app-validation [control]="form.get('confirmacaoSenha')" [submitted]="formSubmitted" mode="submitted"></app-validation>
          <app-validation [control]="form" [submitted]="formSubmitted"
            [messages]="[{ type: 'senhaConfirmada', message: 'As senhas não conferem' }]" mode="submitted"></app-validation>
        </div>
      </div>

      <div class="ui-g form-group-botoes">
        <div class="ui-g-12">
          <button pButton type="submit" class="pull-right" icon="fa fa-check" label="Atualizar"></button>
          <a pButton routerLink="/login" class="pull-left ui-button-secondary" icon="fa fa-undo" label="Voltar"></a>
        </div>
      </div>
    </form>
  </ng-template>
</div>
